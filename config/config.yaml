# YakaTeka Configuration File
# This file can be placed at:
#   - $HOME/.yakateka/config.yaml
#   - ./config/config.yaml
#   - Any path specified with --config flag

# OCR Configuration
ocr:
  engine: tesseract           # OCR engine (tesseract, paddleocr)
  languages:                  # Languages to use for OCR
    - uk                      # Ukrainian
    - en                      # English
    - ru                      # Russian
  dpi: 300                    # DPI for image scanning
  preprocess:
    denoise: true             # Apply noise reduction
    deskew: true              # Correct image skew
    threshold: auto           # Thresholding method (auto, manual)

# Document Converter Configuration
converter:
  timeout: 300                # Conversion timeout in seconds (default 300 = 5 minutes)

  pdf:
    engine: pdfcpu            # PDF engine (pdfcpu, unipdf)
    quality: high             # Conversion quality (low, medium, high)

  pandoc:
    path: /usr/bin/pandoc     # Path to pandoc binary
    extra_args: []            # Additional pandoc arguments

  djvu:
    djvutxt_path: /usr/bin/djvutxt  # Path to djvutxt binary (text extraction)
    djvups_path: /usr/bin/djvups    # Path to djvups binary (PostScript conversion)

  postscript:
    ps2pdf_path: /usr/bin/ps2pdf    # Path to ps2pdf binary (Ghostscript)

  libreoffice:
    soffice_path: /usr/bin/soffice  # Path to soffice binary (LibreOffice)

  calibre:
    ebook_convert_path: /usr/bin/ebook-convert  # Path to ebook-convert binary (Calibre)

  image:
    library: bimg             # Image library (bimg, imagick)
    format: png               # Default output format
    dpi: 300                  # DPI for conversions

# Metadata Configuration
metadata:
  checksum: sha256            # Checksum algorithm (sha256, md5)
  sidecar: true               # Create .json metadata sidecar files
  embed: true                 # Embed metadata in documents when possible

# Output Configuration
output:
  format: json                # Output format (json, yaml, text)
  pretty: true                # Pretty-print output

# Logging Configuration
logging:
  level: info                 # Log level (debug, info, warn, error)
  format: json                # Log format (json, text)

# Helper Configuration (NEW!)
helpers:
  cache_file: helpers.yaml    # Generated cache file
  weights:
    # Helper scripts with weights (0.0 to 1.0)
    # Higher weight = higher priority
    # Format: path: weight
    # Paths support environment variable expansion: ${VAR}/path
    # Set PROJECT_ROOT environment variable or use absolute paths

    # Pandoc - Universal markup converter (highest priority for markup)
    helpers/pandoc-helper.sh: 0.95

    # Poppler - PDF utilities (high priority for PDF to text/images)
    helpers/poppler-helper.sh: 0.90

    # LibreOffice - Office documents (high priority for office formats)
    helpers/libreoffice-helper.sh: 0.85

    # Calibre - Ebook converter (high priority for ebook formats)
    helpers/calibre-helper.sh: 0.80

    # Ghostscript - PostScript/PDF (medium priority)
    helpers/ghostscript-helper.sh: 0.75

    # DjVuLibre - DjVu documents (medium priority)
    helpers/djvulibre-helper.sh: 0.70

    # pdf2djvu - PDF to DjVu (lower priority, specialized)
    helpers/pdf2djvu-helper.sh: 0.65

    # AbiWord - Word processor (lowest priority, fallback)
    helpers/abiword-helper.sh: 0.60
